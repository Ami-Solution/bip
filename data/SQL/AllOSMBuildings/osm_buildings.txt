One off

Compile osm2pgsql



git clone https://github.com/openstreetmap/osm2pgsql.git

cd osm2pgsql/

./autogen.sh

./configure

make


----------------------------------------------------------------------


Download the OSM dump for Australia

wget http://www.osmaustralia.org/osmdumps/australia.osm.zip


Unzip

unzip australia.osm.zip


Drop the temporary osm database

drop database temp_osm


Load the data into a temporary database

osm2pgsql -d temp_osm



OSM buildings table (the content of a view can not be dumped):

psql -d temp_osm -c "create table osm_buildings as select osm_id,building,man_made,name,way as the_geom from planet_osm_polygon where building is not null"


Dump the OSM building view into file

pg_dump -p 54321 -t osm_buildings osm_aus > buildings.sql


Drop the destination table

psql -d buildinggis -c "drop table osm_buildings"


Reload the table in the database

psql -d buildinggis -f buildings.sql


Create a spatial index on it


Need to de-duplicate to be able to put a primary key on osm_id